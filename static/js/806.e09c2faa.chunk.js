(()=>{"use strict";var e={806:(e,t,r)=>{var a=r(284);const o=`${self.location.origin}`;const s=new class{constructor(){this.session=null}async init(e){try{const t=`${o}/models/${e}.onnx`;return this.session=await a.wV.create(t),!0}catch(t){return console.log(["[NCAWorker -- init] error! "+t]),!1}}async run_step(e,t){if(this.session)try{const r={input:new a.qY("float32",e,[1,16,t,t,t])},o=await this.session.run(r);return o.output.data}catch(r){return void console.log(["[NCAWorker -- run_step] error! at inference: "+r])}else console.log("[NCAWorker -- run_step] error! model not initialized. call initialize() first")}damage_state(e,t){const r=this.createHalfVolumeMask(t),a=new Float32Array(e.length);for(let o=0;o<16;o++)for(let s=0;s<t;s++)for(let n=0;n<t;n++)for(let i=0;i<t;i++){const l=s*t*t+n*t+i,c=o*t*t*t+l;a[c]=e[c]*r[l]}return a}createHalfVolumeMask(e){const t=["x+","x-","y+","y-","z+","z-"],r=t[Math.floor(Math.random()*t.length)],a=new Float32Array(e*e*e),o=Math.floor(e/2);for(let s=0;s<e;s++)for(let t=0;t<e;t++)for(let n=0;n<e;n++){const i=s*e*e+t*e+n;a[i]="x+"===r&&s<o||"x-"===r&&s>=o||"y+"===r&&t<o||"y-"===r&&t>=o||"z+"===r&&n<o||"z-"===r&&n>=o?1:0}return a}};onmessage=async e=>{if("init"===e.data.type){const t=e.data.data;await s.init(t[0])?postMessage({type:"init-complete"}):postMessage({type:"error",data:"error! attempting to initialize session"})}else if("run"===e.data.type)try{const t=e.data.data,r=await s.run_step(t[0],t[1]);postMessage({type:"result",data:r})}catch(t){console.log(["[NCAWorker -- onmessage] error! run step: "+t]),postMessage({type:"error",data:t})}else if("dmg"===e.data.type)try{const t=e.data.data;let r=s.damage_state(t[0],t[1]);postMessage({type:"result",data:r})}catch(t){console.log(["[NCAWorker -- onmessage] error! damage state: "+t]),postMessage({type:"error",data:t})}}}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.m=e,r.x=()=>{var e=r.O(void 0,[284],(()=>r(806)));return e=r.O(e)},(()=>{var e=[];r.O=(t,a,o,s)=>{if(!a){var n=1/0;for(p=0;p<e.length;p++){a=e[p][0],o=e[p][1],s=e[p][2];for(var i=!0,l=0;l<a.length;l++)(!1&s||n>=s)&&Object.keys(r.O).every((e=>r.O[e](a[l])))?a.splice(l--,1):(i=!1,s<n&&(n=s));if(i){e.splice(p--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[a,o,s]}})(),r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[])),r.u=e=>"static/js/"+e+".01e5d91a.chunk.js",r.miniCssF=e=>{},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.p="/",(()=>{r.b=self.location+"/../../../";var e={806:1};r.f.i=(t,a)=>{e[t]||importScripts(r.p+r.u(t))};var t=self.webpackChunkbrowser_nca=self.webpackChunkbrowser_nca||[],a=t.push.bind(t);t.push=t=>{var o=t[0],s=t[1],n=t[2];for(var i in s)r.o(s,i)&&(r.m[i]=s[i]);for(n&&n(r);o.length;)e[o.pop()]=1;a(t)}})(),(()=>{var e=r.x;r.x=()=>r.e(284).then(e)})();r.x()})();
//# sourceMappingURL=806.e09c2faa.chunk.js.map